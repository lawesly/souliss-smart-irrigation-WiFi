<html><!DOCTYPE html> 
<html lang="en"> 
<head> 
    
		<meta charset="utf-8">
  	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>SSI Inserimento Programmi</title>
	<link rel="stylesheet" href="css/jquery-ui.min.css">
	<script src="javascript/jquery.js"></script>
	<script src="javascript/jquery-ui.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">

	<meta id="viewport" name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />	
	
    
	<script type="text/javascript">
	var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      	
      	if (isMobile) {
      		document.write("<LINK rel=stylesheet href='css/programmod_mobile.css'");
      	}
      	else{
      		document.write("<LINK rel=stylesheet href='css/programmod_desktop.css'");
      	}
		
		//salvataggio
		function saveNewProgramma(){
		// variabile per salvare
		sched_json="";
		//mettiamo a zero tutto
		Programma=0;
		Attivo=0;
		Inizio=0;
		Fine=0;
		TuttiGiorni=0;
		Lunedi=0;
		Martedi=0;
		Mercoledi=0;
		Giovedi=0;
		Venerdi=0;
		Sabato=0;
		Domenica=0;
		TutteValvole=0;
		Valvola1=0;
		Valvola2=0;
		Valvola3=0;
		Valvola4=0;
		Valvola5=0;
		Valvola6=0;
		Valvola7=0;
		Valvola8=0;
		
		// Assegnamo i dati 
		
		Programma=document.getElementById("programma").value;

		if(document.getElementById("programmaattivosi").checked){
			Attivo=1;
		}
		else
		{
			Attivo=0;
		}
		Inizio=document.getElementById("orainizio").value;
		Fine=document.getElementById("orafine").value;
		
		if(document.getElementById("tuttigiorni").checked){
			TuttiGiorni=1;
			}
		if(document.getElementById("lun").checked){
			Lunedi=1;
			}
		if(document.getElementById("mar").checked){
			Martedi=1;
			}
		if(document.getElementById("mer").checked){
			Mercoledi=1;
		}
		if(document.getElementById("gio").checked){
			Giovedi=1;
			}
		if(document.getElementById("ven").checked){
			Venerdi=1;
			}
		if(document.getElementById("sab").checked){
			Sabato=1;
		}
		if(document.getElementById("dom").checked){
			Domenica=1;
		}
		if(document.getElementById("tuttevalvole").checked){
			TutteValvole=1;
			}
		if(document.getElementById("valvola1").checked){
			Valvola1=1;
			}
		if(document.getElementById("valvola2").checked){
			Valvola2=1;
			}
		if(document.getElementById("valvola3").checked){
			Valvola3=1;
		}
		if(document.getElementById("valvola4").checked){
			Valvola4=1;
			}
		if(document.getElementById("valvola5").checked){
			Valvola5=1;
			}
		if(document.getElementById("valvola6").checked){
			Valvola6=1;
		}
		if(document.getElementById("valvola7").checked){
			Valvola7=1;
		}
		if(document.getElementById("valvola8").checked){
			Valvola8=1;
		}
		
		
		sched_json="{ \"Programma\": \""+Programma+"\" , \"Attivo\": "+Attivo+",\"Inizio\": \""+Inizio+"\"  ,\"Fine\": \""+Fine+"\" , \"TuttiGiorni\": "+TuttiGiorni+", \"Lunedi\": "+Lunedi+",\"Martedi\": "+Martedi+" , \"Mercoledi\": "+Mercoledi+",\"Giovedi\": "+Giovedi+"  ,\"Venerdi\": "+Venerdi+" , \"Sabato\": "+Sabato+", \"Domenica\": "+Domenica+",\"TutteValvole\": "+TutteValvole+" , \"Valvola1\": "+Valvola1+",\"Valvola2\": "+Valvola2+"  ,\"Valvola3\": "+Valvola3+" , \"Valvola4\": "+Valvola4+", \"Valvola5\": "+Valvola5+", \"Valvola6\": "+Valvola6+" , \"Valvola7\": "+Valvola7+",\"Valvola8\": "+Valvola8+"}\n";
		console.log(sched_json);
				
		//salviamo m andando in POST
		
		
		$.ajax( "programinput", {
			data: sched_json,
			contentType: 'application/json',
			async: false,
			type : 'POST', 
			success: function( html ) {
				window.document.write( html );
				}		
		});
		//window.location.reload();
	 }
      
	  function ckChange(ckType) {
	  var ckName = document.getElementsByName(ckType.name);

		for (var i = 0; i < ckName.length; i++) {
			if (!ckType.checked) {
			ckName[i].disabled = false;
			} else {
				if (!ckName[i].checked) {
				ckName[i].disabled = true;
				} else {
				ckName[i].disabled = false;
				}
			}
		}
	}
	  
	  </script>	
	   
   </head>
	
   <body>
      <p style="titolo" id="titolo">SSI Nuovo Programma</p>
      
       <form action="">

	<table width="950" border="0" align="center" cellpadding="0" cellspacing="10">
	  <tr>
	    <td width="25%" class="inserimento">Programma:</td>
	    <td colspan="3" align="left"><label for="programma"></label>
        <input name="programma" type="text" class="testotabella" id="programma"  size="80" maxlength="100"></td>
      </tr>
	  <tr>
	    <td class="inserimento">Inizio:</td>
	    <td width="18%" align="left"><input name="orainizio" type="time" class="testotabella" value="00:00" id="orainizio"></td>
	    <td width="18%" align="right" class="aaa"><span class="inserimento">Fine:</span></td>
	    <td width="39%" align="left"><input name="orafine" type="time" class="testotabella" value="00:00" id="orafine"></td>
      </tr>
	  <tr class="inserimento">
	    <td class="inserimento">Giorni :</td>
	    <td colspan="3" align="left">
          <table width="101%" border="0">
            <tr>
              <td><p>
               <INPUT TYPE="checkbox" NAME="giorni" class="checkbox" value="off" style="font-family:Comfortaa;" id="tuttigiorni" onClick="ckChange(this)">Tutti
                <INPUT TYPE="checkbox" NAME="giorni" class="checkbox" value="off" style="font-family:Comfortaa;" id="lun">Lunedi
                <INPUT TYPE="checkbox" NAME="giorni" class="checkbox" value="off" style="font-family:Comfortaa;" id="mar">Martedi
                <INPUT TYPE="checkbox" NAME="giorni" class="checkbox" value="off" style="font-family:Comfortaa;" id="mer">Mercoledi
                <INPUT TYPE="checkbox" NAME="giorni" class="checkbox" value="off" style="font-family:Comfortaa;" id="gio">Giovedi
                <INPUT TYPE="checkbox" NAME="giorni" class="checkbox" value="off" style="font-family:Comfortaa;" id="ven">Venerdi
                <INPUT TYPE="checkbox" NAME="giorni" class="checkbox" value="off" style="font-family:Comfortaa;" id="sab">Sabato
                <INPUT TYPE="checkbox" NAME="giorni" class="checkbox" value="off" style="font-family:Comfortaa;" id="dom">Domen.
               </p></td>
            </tr>
        </table></td>
      </tr>
	  <tr>
	    <td class="inserimento">Valvole:</td>
	    <td colspan="3" align="left"><table width="101%" border="0">
	      <tr>
	        <td><p>
	          <INPUT NAME="valvole" TYPE="checkbox" VALUE="1" id="tuttevalvole"  onClick="ckChange(this)">Tutte
	          <INPUT TYPE="checkbox" NAME="valvole" class="checkbox" VALUE="off" id="valvola1">1
	          <INPUT TYPE="checkbox" NAME="valvole" class="checkbox" VALUE="off" id="valvola2">2
	          <INPUT TYPE="checkbox" NAME="valvole" class="checkbox" VALUE="off" id="valvola3">3
	          <INPUT TYPE="checkbox" NAME="valvole" class="checkbox" VALUE="off" id="valvola4">4
	          <INPUT TYPE="checkbox" NAME="valvole" class="checkbox" VALUE="off" id="valvola5">5
	          <INPUT TYPE="checkbox" NAME="valvole" class="checkbox" VALUE="off" id="valvola6">6
	          <INPUT TYPE="checkbox" NAME="valvole" class="checkbox" VALUE="off" id="valvola7">7
	          <INPUT TYPE="checkbox" NAME="valvole" class="checkbox" VALUE="off" id="valvola8">8
	          </p></td>
          </tr>
	      </table>
</td>
      </tr>
	  <tr>
	    <td class="inserimento">Attivo:</td>
	    <td colspan="3" align="left"><p>
          <label>
            <input type="radio" name="programmaattivo" value="1" id="programmaattivosi" checked>
          Si</label>
          <label>
            <input type="radio" name="programmaattivo" value="0" id="programmaattivono">
          No</label>
          <br>
        </p></td>
      </tr>
    </table>
	<p>&nbsp;</p>
   </form>

<div style=" color:rgba(21,199,238,1);">
    
  
     
       <div align="center" style = " width:950px; background-position:center; margin:0 auto;" >
		<p></p>
		<input type="submit" value="Cancel" onclick="window.location = './programlist.htm';" /				>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;		
		<input type="submit" value="Salva" onclick="saveNewProgramma();" />
		<p></p>
       </div>
</body>
	
</html>
